<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Rental | Rental Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/base.css">
    <script src="js/feedback-modal.js"></script>
    <script src="js/listing-storage.js"></script>
</head>
<body class="bg-white text-zinc-900 antialiased selection:bg-emerald-100 selection:text-emerald-900 min-h-screen">

    <!-- Top Header -->
    <header class="fixed top-0 right-0 left-0 md:left-64 h-14 bg-white border-b border-zinc-100 z-40">
        <div class="h-full flex items-center justify-between px-6">
            <div class="md:hidden">
                <button class="p-2 hover:bg-zinc-50 rounded-md transition-colors">
                    <iconify-icon icon="lucide:menu" width="20" class="text-zinc-600"></iconify-icon>
                </button>
            </div>
            <div class="flex items-center gap-4 ml-auto">
                <div class="flex items-center gap-2 px-3 py-1.5 hover:bg-zinc-50 rounded-md cursor-pointer transition-colors">
                    <div class="w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-700 text-xs font-medium">R</div>
                    <span class="text-sm font-medium text-zinc-900 hidden sm:block">Rita</span>
                    <iconify-icon icon="lucide:chevron-down" width="16" class="text-zinc-400"></iconify-icon>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <aside class="fixed top-0 left-0 bottom-0 w-64 bg-white border-r border-zinc-100 z-50 overflow-y-auto hidden md:block">
        <div class="p-6 border-b border-zinc-100">
            <a href="index.html" class="flex items-center gap-2">
                <div class="w-6 h-6 bg-emerald-600 rounded-md flex items-center justify-center text-white">
                    <iconify-icon icon="lucide:building-2" width="16" stroke-width="1.5"></iconify-icon>
                </div>
                <span class="text-sm font-semibold tracking-tight">RENTAL MANAGER</span>
            </a>
        </div>
        <nav class="p-4 space-y-1">
            <a href="dashboard.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors">
                <iconify-icon icon="lucide:layout-dashboard" width="18" stroke-width="1.5"></iconify-icon>
                <span class="text-sm font-medium">Dashboard</span>
            </a>
            <a href="payments.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors">
                <iconify-icon icon="lucide:wallet" width="18" stroke-width="1.5"></iconify-icon>
                <span class="text-sm font-medium">Payments</span>
            </a>
            <a href="leases.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors">
                <iconify-icon icon="lucide:file-text" width="18" stroke-width="1.5"></iconify-icon>
                <span class="text-sm font-medium">Residents & Leases</span>
            </a>
            <a href="maintenance.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors">
                <iconify-icon icon="lucide:wrench" width="18" stroke-width="1.5"></iconify-icon>
                <span class="text-sm font-medium">Maintenance</span>
            </a>
            <div class="pt-4 mt-4 border-t border-zinc-100 space-y-1">
                <a href="help.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors">
                    <iconify-icon icon="lucide:help-circle" width="18" stroke-width="1.5"></iconify-icon>
                    <span class="text-sm font-medium">Help</span>
                </a>
                <div class="account-dropdown">
                    <button class="w-full flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors" onclick="toggleAccountDropdown()">
                        <iconify-icon icon="lucide:settings" width="18" stroke-width="1.5"></iconify-icon>
                        <span class="text-sm font-medium">Account</span>
                        <iconify-icon icon="lucide:chevron-down" width="14" class="text-zinc-400 ml-auto account-chevron transition-transform"></iconify-icon>
                    </button>
                    <div class="account-submenu hidden mt-1 ml-4 space-y-1">
                        <a href="my-account.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors text-sm">
                            My Account
                        </a>
                        <a href="banks-cards.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors text-sm">
                            Banks & Cards
                        </a>
                        <a href="billing-history.html" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors text-sm">
                            Billing History
                        </a>
                    </div>
                </div>
                <a href="#" onclick="openFeedbackModal(); return false;" class="flex items-center gap-3 px-3 py-2 text-zinc-600 hover:bg-zinc-50 rounded-md transition-colors">
                    <iconify-icon icon="lucide:message-square" width="18" stroke-width="1.5"></iconify-icon>
                    <span class="text-sm font-medium">Provide Feedback</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="md:ml-64 pt-14 min-h-screen bg-zinc-50">
        <div class="p-6">
            <div class="max-w-5xl mx-auto">
                <!-- Main Form Card -->
                <div class="bg-white rounded-lg border border-zinc-200 shadow-sm p-8">
                    <div class="mb-8">
                        <h1 class="text-2xl font-medium tracking-tight text-zinc-900 mb-2">Create Rental</h1>
                        <div class="flex items-center gap-2 text-sm text-zinc-500">
                            <span class="font-medium">Step 1 of 6: Basics</span>
                            <span>â€¢</span>
                            <span>Enter basic information about your property.</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                        <!-- Left Sidebar - Steps -->
                        <div class="lg:col-span-1">
                            <div class="space-y-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white text-sm font-medium">1</div>
                                    <span class="text-sm font-medium text-zinc-900">Basics</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full border-2 border-zinc-300 flex items-center justify-center text-zinc-400 text-sm font-medium">2</div>
                                    <span class="text-sm text-zinc-500">Amenities</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full border-2 border-zinc-300 flex items-center justify-center text-zinc-400 text-sm font-medium">3</div>
                                    <span class="text-sm text-zinc-500">Media</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full border-2 border-zinc-300 flex items-center justify-center text-zinc-400 text-sm font-medium">4</div>
                                    <span class="text-sm text-zinc-500">Description</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full border-2 border-zinc-300 flex items-center justify-center text-zinc-400 text-sm font-medium">5</div>
                                    <span class="text-sm text-zinc-500">Contact</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full border-2 border-zinc-300 flex items-center justify-center text-zinc-400 text-sm font-medium">6</div>
                                    <span class="text-sm text-zinc-500">Review</span>
                                </div>
                            </div>
                        </div>

                        <!-- Right Side - Form -->
                        <div class="lg:col-span-3">

                            <!-- Add Your Property Section -->
                            <div class="mb-8 bg-white rounded-lg border border-zinc-200 p-6">
                                <h2 class="text-2xl font-medium text-zinc-900 mb-2">Add your property</h2>
                                <p class="text-sm text-zinc-600 mb-6">
                                    First, we need some details about your property. That way, we can tailor the property management experience to you.
                                </p>

                                <!-- Property Type Selection -->
                                <div class="mb-6">
                                    <label class="block text-sm font-medium text-zinc-900 mb-3">What kind of property is it?</label>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                        <button 
                                            type="button"
                                            id="propertyTypeSingleFamily"
                                            onclick="selectPropertyType('single-family')"
                                            class="px-4 py-3 rounded-md border border-zinc-200 bg-white text-zinc-900 font-medium text-sm hover:bg-zinc-50 transition-colors"
                                        >
                                            Single Family Home
                                        </button>
                                        <button 
                                            type="button"
                                            id="propertyTypeCondo"
                                            onclick="selectPropertyType('condo')"
                                            class="px-4 py-3 rounded-md bg-emerald-600 text-white font-medium text-sm hover:bg-emerald-700 transition-colors"
                                        >
                                            Condo
                                        </button>
                                        <button 
                                            type="button"
                                            id="propertyTypeTownhome"
                                            onclick="selectPropertyType('townhome')"
                                            class="px-4 py-3 rounded-md border border-zinc-200 bg-white text-zinc-900 font-medium text-sm hover:bg-zinc-50 transition-colors"
                                        >
                                            Room
                                        </button>
                                    </div>
                                </div>

                                <!-- Address Input -->
                                <div class="mb-6">
                                    <label for="propertyAddress" class="block text-sm font-medium text-zinc-900 mb-2">
                                        What's the address of your property?
                                    </label>
                                    <input 
                                        type="text" 
                                        id="propertyAddress"
                                        placeholder="Enter property address"
                                        class="w-full px-4 py-2.5 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
                                        onchange="savePropertyTypeData()"
                                        oninput="savePropertyTypeData()"
                                    >
                                </div>
                            </div>

                            <!-- Unit Details Section -->
                            <div class="mb-8">
                                <h2 class="text-lg font-medium text-zinc-900 mb-4">Unit Details</h2>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <!-- Beds -->
                                    <div>
                                        <label class="block text-sm font-medium text-zinc-900 mb-2">Beds</label>
                                        <select id="beds" class="w-full px-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" onchange="saveUnitData(); validateForm();">
                                            <option value="Studio" selected>Studio</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4+">4+</option>
                                        </select>
                                    </div>

                                    <!-- Baths -->
                                    <div>
                                        <label class="block text-sm font-medium text-zinc-900 mb-2">Baths</label>
                                        <select id="baths" class="w-full px-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" onchange="saveUnitData(); validateForm();">
                                            <option>Select</option>
                                            <option>1</option>
                                            <option>1.5</option>
                                            <option>2</option>
                                            <option>2.5</option>
                                            <option>3+</option>
                                        </select>
                                    </div>

                                    <!-- Size -->
                                    <div>
                                        <label class="block text-sm font-medium text-zinc-900 mb-2">Size</label>
                                        <div class="flex w-full">
                                            <input type="number" id="size" placeholder="0" class="flex-1 px-4 py-2 rounded-l-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" oninput="saveUnitData(); validateForm();">
                                            <span class="px-4 py-2 bg-zinc-50 border border-l-0 border-zinc-200 rounded-r-md text-sm text-zinc-600 flex items-center whitespace-nowrap">Sq Ft.</span>
                                        </div>
                                    </div>

                                    <!-- Monthly Rent -->
                                    <div>
                                        <label class="block text-sm font-medium text-zinc-900 mb-2">Monthly Rent</label>
                                        <div class="relative">
                                            <span class="absolute left-3 top-2.5 text-zinc-500">$</span>
                                            <input type="number" id="monthlyRent" placeholder="0" class="w-full pl-7 pr-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" oninput="saveUnitData(); validateForm();">
                                        </div>
                                    </div>

                                    <!-- Deposit -->
                                    <div>
                                        <label class="block text-sm font-medium text-zinc-900 mb-2">Deposit</label>
                                        <div class="relative">
                                            <span class="absolute left-3 top-2.5 text-zinc-500">$</span>
                                            <input type="number" id="deposit" placeholder="0" class="w-full pl-7 pr-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" oninput="saveUnitData(); validateForm();">
                                        </div>
                                    </div>

                                    <!-- Lease Length -->
                                    <div>
                                        <label class="block text-sm font-medium text-zinc-900 mb-2">Lease Length</label>
                                        <div class="flex w-full">
                                            <input type="number" id="leaseLength" value="12" class="flex-1 px-4 py-2 rounded-l-md border border-zinc-200 bg-white text-zinc-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" oninput="saveUnitData(); validateForm();">
                                            <span class="px-4 py-2 bg-zinc-50 border border-l-0 border-zinc-200 rounded-r-md text-sm text-zinc-600 flex items-center whitespace-nowrap">Months</span>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <!-- Building Information -->
                            <div class="mb-8">
                                <h2 class="text-lg font-medium text-zinc-900 mb-4">Building Information</h2>
                                <div>
                                    <label class="block text-sm font-medium text-zinc-900 mb-2">
                                        Year Built <span class="text-zinc-400 font-normal">(Optional)</span>
                                    </label>
                                    <input type="number" id="yearBuilt" placeholder="e.g., 2020" class="w-full md:w-48 px-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" oninput="saveUnitData(); validateForm();">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Save & Continue Button -->
                <div class="mt-6">
                    <div class="flex justify-end">
                        <button id="saveContinueButton" onclick="validateAndContinue()" class="px-6 py-2.5 rounded-md bg-emerald-600 text-white font-medium text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-emerald-600" disabled>
                            Save & Continue
                            <iconify-icon icon="lucide:arrow-right" width="16"></iconify-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Floating Help Button -->
    <button class="fixed bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors flex items-center justify-center z-30">
        <iconify-icon icon="lucide:help-circle" width="24"></iconify-icon>
    </button>

    <!-- Unit Photos Modal -->
    <div id="unitPhotosModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-6 border-b border-zinc-200">
                <h2 class="text-xl font-medium text-zinc-900">Unit 14 Photos</h2>
                <button onclick="closeUnitPhotosModal()" class="p-2 hover:bg-zinc-50 rounded-md transition-colors">
                    <iconify-icon icon="lucide:x" width="20" class="text-zinc-500"></iconify-icon>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="p-6">
                <p class="text-sm text-zinc-500 mb-6">
                    <span class="text-zinc-400">(Optional)</span> Upload unit specific photos to display on the listing. You can reorder your uploaded photos by dragging and dropping the thumbnails.
                </p>
                
                <!-- Upload Area -->
                <div class="border-2 border-dashed border-zinc-300 rounded-lg p-8 text-center hover:border-emerald-400 transition-colors cursor-pointer bg-zinc-50/50">
                    <input type="file" id="photoUpload" multiple accept="image/gif,image/png,image/jpeg" class="hidden" onchange="handleFileUpload(event)">
                    <label for="photoUpload" class="cursor-pointer">
                        <iconify-icon icon="lucide:cloud-upload" width="48" class="text-zinc-400 mx-auto mb-4"></iconify-icon>
                        <p class="text-sm text-zinc-600 mb-1">
                            <span class="text-emerald-600 font-medium">Click to upload</span> or drag and drop
                        </p>
                        <p class="text-xs text-zinc-500">GIF, PNG, or JPG (max 75MB)</p>
                    </label>
                </div>
                
                <!-- Uploaded Photos Preview (will show when photos are uploaded) -->
                <div id="photosPreview" class="mt-6 grid grid-cols-4 gap-4 hidden">
                    <!-- Photos will be added here dynamically -->
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="flex items-center justify-end gap-3 p-6 border-t border-zinc-200">
                <button onclick="closeUnitPhotosModal()" class="px-4 py-2 rounded-md border border-zinc-200 text-zinc-700 font-medium text-sm hover:bg-zinc-50 transition-colors">
                    Cancel
                </button>
                <button onclick="applyUnitPhotos()" class="px-4 py-2 rounded-md bg-emerald-600 text-white font-medium text-sm hover:bg-emerald-700 transition-colors">
                    Apply
                </button>
            </div>
        </div>
    </div>

    <!-- Unit Amenities Modal -->
    <div id="unitAmenitiesModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-6 border-b border-zinc-200">
                <div>
                    <h2 class="text-xl font-medium text-zinc-900 mb-1">Unit 14 Amenities</h2>
                    <p class="text-sm text-zinc-500">
                        <span class="text-zinc-400">(Optional)</span> Select amenities specific to this unit to display on the listing.
                    </p>
                </div>
                <button onclick="closeUnitAmenitiesModal()" class="p-2 hover:bg-zinc-50 rounded-md transition-colors">
                    <iconify-icon icon="lucide:x" width="20" class="text-zinc-500"></iconify-icon>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="p-6">
                <!-- Category Filter and Selection Count -->
                <div class="flex items-center justify-between mb-6 pb-4 border-b border-zinc-200">
                    <div class="flex items-center gap-2">
                        <label class="text-sm font-medium text-zinc-900">Category:</label>
                        <select id="amenityCategory" class="text-sm text-emerald-600 border-0 bg-transparent focus:outline-none cursor-pointer">
                            <option>All</option>
                            <option>Interior</option>
                            <option>Exterior</option>
                            <option>Technology</option>
                        </select>
                        <iconify-icon icon="lucide:chevron-down" width="14" class="text-emerald-600"></iconify-icon>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-zinc-900" id="selectedCount">0 selected</span>
                        <button onclick="clearAmenities()" class="text-sm text-emerald-600 hover:text-emerald-700">Clear</button>
                    </div>
                </div>
                
                <!-- Amenities Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Left Column -->
                    <div class="space-y-3">
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Air Conditioning</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Fireplace</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Washer/Dryer</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Heating</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Ceiling Fans</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">High Speed Internet Access</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Sprinkler System</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Surround Sound</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Framed Mirrors</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Intercom</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Trash Compactor</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Wheelchair Accessible (Rooms)</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Disposal</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Eat-in Kitchen</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Granite Countertops</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Refrigerator</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Stainless Steel Appliances</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Breakfast Nook</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Freezer</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Island Kitchen</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Warming Drawer</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Balcony</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Grill</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Dock</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Greenhouse</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Patio</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Bay Window</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Crown Molding</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Vaulted Ceiling</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Views</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Carpet</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Basement</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Den</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Double Pane Windows</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Furnished</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Loft Layout</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Mud Room</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Recreation Room</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Vinyl Flooring</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Window Coverings</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">High Ceilings</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Floor to Ceiling Windows</span>
                        </label>
                    </div>
                    
                    <!-- Right Column -->
                    <div class="space-y-3">
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Cable Ready</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Storage Space</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Washer/Dryer Hookup</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Security System</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Double Vanities</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Satellite TV</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Tub/Shower</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Wi-Fi</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Handrails</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Smoke Free</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Vacuum System</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Dishwasher</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Microwave</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Kitchen</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Ice Maker</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Oven</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Range</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Coffee System</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Instant Hot Water</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Pantry</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Quartz Countertops</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Yard</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Deck</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Garden</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Lawn</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Porch</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Tile Floors</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Hardwood Floors</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Sunroom</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Walk-In Closets</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Attic</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Built-In Bookshelves</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Dining Room</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Family Room</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Linen Closet</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Mother-in-law Unit</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Office</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Skylights</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Wet Bar</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Workshop</span>
                        </label>
                        <label class="flex items-center gap-3 cursor-pointer p-2 hover:bg-zinc-50 rounded-md transition-colors">
                            <input type="checkbox" class="amenity-checkbox w-4 h-4 rounded border-zinc-300 text-emerald-600 focus:ring-emerald-500" onchange="updateSelectedCount()">
                            <span class="text-sm text-zinc-700">Large Bedrooms</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="flex items-center justify-end p-6 border-t border-zinc-200">
                <button onclick="applyUnitAmenities()" class="px-6 py-2 rounded-md bg-emerald-600 text-white font-medium text-sm hover:bg-emerald-700 transition-colors">
                    Apply
                </button>
            </div>
        </div>
    </div>

    <!-- Unit Description Modal -->
    <div id="unitDescriptionModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-6 border-b border-zinc-200">
                <h2 class="text-xl font-medium text-zinc-900">Unit 14 Description</h2>
                <button onclick="closeUnitDescriptionModal()" class="p-2 hover:bg-zinc-50 rounded-md transition-colors">
                    <iconify-icon icon="lucide:x" width="20" class="text-zinc-500"></iconify-icon>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="p-6">
                <p class="text-sm text-zinc-500 mb-4">
                    <span class="text-zinc-400">(Optional)</span> Add a description for this specific unit.
                </p>
                
                <!-- Text Area -->
                <div class="relative">
                    <textarea 
                        id="unitDescriptionText" 
                        rows="10" 
                        maxlength="7000"
                        placeholder="Enter your unit description here."
                        class="w-full px-4 py-3 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"
                        oninput="updateCharacterCount()"
                    ></textarea>
                    <div class="absolute bottom-3 right-3 text-xs text-zinc-400">
                        <span id="characterCount">7000</span> Characters Remaining
                    </div>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="flex items-center justify-end p-6 border-t border-zinc-200">
                <button onclick="applyUnitDescription()" class="px-6 py-2 rounded-md bg-emerald-600 text-white font-medium text-sm hover:bg-emerald-700 transition-colors">
                    Apply
                </button>
            </div>
        </div>
    </div>

    <script>
        function toggleAccountDropdown() {
            const submenu = document.querySelector('.account-submenu');
            const chevron = document.querySelector('.account-chevron');
            submenu.classList.toggle('hidden');
            chevron.classList.toggle('rotate-180');
        }


        function openUnitPhotosModal() {
            const modal = document.getElementById('unitPhotosModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Load saved photos
            const saved = ListingStorage.getCurrentListing();
            const preview = document.getElementById('photosPreview');
            if (saved?.unit?.photos && saved.unit.photos.length > 0) {
                uploadedPhotos = saved.unit.photos;
                preview.classList.remove('hidden');
                preview.innerHTML = '';
                
                uploadedPhotos.forEach((photo, index) => {
                    const photoDiv = document.createElement('div');
                    photoDiv.className = 'relative group';
                    photoDiv.setAttribute('data-photo-index', index);
                    photoDiv.innerHTML = `
                        <img src="${photo.dataUrl}" alt="Photo ${index + 1}" class="w-full h-24 object-cover rounded-lg border border-zinc-200">
                        <button onclick="removePhoto(this)" class="absolute top-1 right-1 p-1 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity">
                            <iconify-icon icon="lucide:x" width="14" class="text-white"></iconify-icon>
                        </button>
                    `;
                    preview.appendChild(photoDiv);
                });
            }
        }

        function closeUnitPhotosModal() {
            const modal = document.getElementById('unitPhotosModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Store uploaded photos data
        let uploadedPhotos = [];

        function handleFileUpload(event) {
            const files = event.target.files;
            const preview = document.getElementById('photosPreview');
            
            if (files.length > 0) {
                preview.classList.remove('hidden');
                preview.innerHTML = '';
                uploadedPhotos = []; // Reset array
                
                Array.from(files).forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const photoData = {
                            name: file.name,
                            size: file.size,
                            dataUrl: e.target.result
                        };
                        uploadedPhotos.push(photoData);
                        
                        const photoDiv = document.createElement('div');
                        photoDiv.className = 'relative group';
                        photoDiv.setAttribute('data-photo-index', uploadedPhotos.length - 1);
                        photoDiv.innerHTML = `
                            <img src="${e.target.result}" alt="Upload ${index + 1}" class="w-full h-24 object-cover rounded-lg border border-zinc-200">
                            <button onclick="removePhoto(this)" class="absolute top-1 right-1 p-1 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity">
                                <iconify-icon icon="lucide:x" width="14" class="text-white"></iconify-icon>
                            </button>
                        `;
                        preview.appendChild(photoDiv);
                        
                        // Save photos count to localStorage
                        const current = ListingStorage.getCurrentListing() || {};
                        if (!current.unit) current.unit = {};
                        if (!current.media) current.media = {};
                        current.media.photos = uploadedPhotos.length;
                        current.unit.photos = uploadedPhotos; // Store photo data
                        ListingStorage.saveCurrentListing(current);
                    };
                    reader.readAsDataURL(file);
                });
            }
        }

        function removePhoto(button) {
            const photoDiv = button.closest('.relative');
            const photoIndex = parseInt(photoDiv.getAttribute('data-photo-index'));
            
            // Remove from array
            if (photoIndex >= 0 && photoIndex < uploadedPhotos.length) {
                uploadedPhotos.splice(photoIndex, 1);
            }
            
            photoDiv.remove();
            const preview = document.getElementById('photosPreview');
            if (preview.children.length === 0) {
                preview.classList.add('hidden');
            }
            
            // Update photo indices and save
            Array.from(preview.children).forEach((div, index) => {
                div.setAttribute('data-photo-index', index);
            });
            
            // Update localStorage
            const current = ListingStorage.getCurrentListing() || {};
            if (!current.unit) current.unit = {};
            if (!current.media) current.media = {};
            current.media.photos = uploadedPhotos.length;
            current.unit.photos = uploadedPhotos;
            ListingStorage.saveCurrentListing(current);
        }

        function applyUnitPhotos() {
            // Here you would typically save the photos
            closeUnitPhotosModal();
        }

        // Close modal when clicking outside
        document.getElementById('unitPhotosModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeUnitPhotosModal();
            }
        });

        function openUnitAmenitiesModal() {
            const modal = document.getElementById('unitAmenitiesModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Load saved amenities
            const saved = ListingStorage.getCurrentListing();
            if (saved?.unit?.amenities) {
                const checkboxes = modal.querySelectorAll('.amenity-checkbox');
                checkboxes.forEach(cb => {
                    const label = cb.closest('label');
                    const amenityName = label?.querySelector('span')?.textContent.trim();
                    if (saved.unit.amenities.includes(amenityName)) {
                        cb.checked = true;
                    }
                });
            }
            updateSelectedCount();
        }

        function closeUnitAmenitiesModal() {
            const modal = document.getElementById('unitAmenitiesModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        function updateSelectedCount() {
            const checkboxes = document.querySelectorAll('.amenity-checkbox:checked');
            const count = checkboxes.length;
            document.getElementById('selectedCount').textContent = `${count} selected`;
        }

        function clearAmenities() {
            const checkboxes = document.querySelectorAll('.amenity-checkbox');
            checkboxes.forEach(checkbox => checkbox.checked = false);
            updateSelectedCount();
        }

        function applyUnitAmenities() {
            // Collect selected amenities
            const checkboxes = document.querySelectorAll('#unitAmenitiesModal .amenity-checkbox');
            const selectedAmenities = Array.from(checkboxes)
                .filter(cb => cb.checked)
                .map(cb => {
                    const label = cb.closest('label');
                    return label ? label.querySelector('span').textContent.trim() : '';
                })
                .filter(text => text);

            // Save to localStorage
            const current = ListingStorage.getCurrentListing() || {};
            if (!current.unit) current.unit = {};
            current.unit.amenities = selectedAmenities;
            ListingStorage.saveCurrentListing(current);
            
            closeUnitAmenitiesModal();
        }

        // Close modal when clicking outside
        document.getElementById('unitAmenitiesModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeUnitAmenitiesModal();
            }
        });

        function openUnitDescriptionModal() {
            const modal = document.getElementById('unitDescriptionModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Load saved description
            const saved = ListingStorage.getCurrentListing();
            const textarea = document.getElementById('unitDescriptionText');
            if (textarea && saved?.unit?.description) {
                textarea.value = saved.unit.description;
            }
            updateCharacterCount();
        }

        function closeUnitDescriptionModal() {
            const modal = document.getElementById('unitDescriptionModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        function updateCharacterCount() {
            const textarea = document.getElementById('unitDescriptionText');
            const countElement = document.getElementById('characterCount');
            const remaining = 7000 - textarea.value.length;
            countElement.textContent = remaining.toLocaleString();
            
            // Change color if getting low
            if (remaining < 100) {
                countElement.classList.add('text-red-500');
                countElement.classList.remove('text-zinc-400');
            } else {
                countElement.classList.remove('text-red-500');
                countElement.classList.add('text-zinc-400');
            }
        }

        function applyUnitDescription() {
            // Get description text
            const descriptionText = document.getElementById('unitDescriptionText')?.value || '';

            // Save to localStorage
            const current = ListingStorage.getCurrentListing() || {};
            if (!current.unit) current.unit = {};
            current.unit.description = descriptionText;
            ListingStorage.saveCurrentListing(current);
            
            closeUnitDescriptionModal();
        }

        // Close modal when clicking outside
        document.getElementById('unitDescriptionModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeUnitDescriptionModal();
            }
        });

        // Validate all required fields
        function validateForm() {
            const beds = document.getElementById('beds')?.value || '';
            const baths = document.getElementById('baths')?.value || '';
            const size = document.getElementById('size')?.value || '';
            const monthlyRent = document.getElementById('monthlyRent')?.value || '';
            const deposit = document.getElementById('deposit')?.value || '';
            const leaseLength = document.getElementById('leaseLength')?.value || '';

            // Check if all required fields are filled
            // beds can be Studio, 1, 2, 3, or 4+ (any selected value is valid, but must not be empty)
            // baths cannot be "Select" (the placeholder)
            // yearBuilt is optional, so we don't require it
            // unitName is optional (not in the form)
            const isValid = beds !== '' && 
                           baths !== '' && baths !== 'Select' && 
                           size !== '' && parseFloat(size) > 0 &&
                           monthlyRent !== '' && parseFloat(monthlyRent) > 0 &&
                           deposit !== '' && parseFloat(deposit) > 0 &&
                           leaseLength !== '' && parseFloat(leaseLength) > 0;

            const button = document.getElementById('saveContinueButton');
            const warning = document.getElementById('validationWarning');

            if (button) {
                if (isValid) {
                    button.disabled = false;
                    if (warning) {
                        warning.classList.add('hidden');
                    }
                } else {
                    button.disabled = true;
                    if (warning) {
                        warning.classList.remove('hidden');
                    }
                }
            }

            return isValid;
        }

        // Clear all form fields
        function clearFormFields() {
            document.getElementById('unitName').value = '';
            document.getElementById('beds').value = '';
            document.getElementById('baths').value = 'Select';
            document.getElementById('size').value = '';
            document.getElementById('monthlyRent').value = '';
            document.getElementById('deposit').value = '';
            document.getElementById('leaseLength').value = '12';
            document.getElementById('yearBuilt').value = '';
        }

        // Validate and continue to next step
        function validateAndContinue() {
            console.log('validateAndContinue called');
            const isValid = validateForm();
            console.log('Form validation result:', isValid);
            
            if (isValid) {
                console.log('Saving step 1 data...');
                saveStep1Data();
                // Set flag to indicate we're navigating to next step (don't clear data)
                sessionStorage.setItem('creatingListing', 'true');
                console.log('Navigating to step 2...');
                window.location.href = 'create-listing-step2.html';
            } else {
                console.log('Validation failed');
                const warning = document.getElementById('validationWarning');
                if (warning) {
                    warning.classList.remove('hidden');
                }
                alert('Please fill in all required fields before continuing.');
            }
        }

        // Real-time save function - saves data as user types
        function saveUnitData() {
            const propertyAddress = document.getElementById('propertyAddress')?.value.trim() || '';
            const unitName = document.getElementById('unitName')?.value || '';
            const beds = document.getElementById('beds')?.value || '';
            const baths = document.getElementById('baths')?.value || '';
            const size = document.getElementById('size')?.value || '';
            const monthlyRent = document.getElementById('monthlyRent')?.value || '';
            const deposit = document.getElementById('deposit')?.value || '';
            const leaseLength = document.getElementById('leaseLength')?.value || '12';
            const yearBuilt = document.getElementById('yearBuilt')?.value || '';

            // Get existing saved data to preserve amenities, description, and photos
            const current = ListingStorage.getCurrentListing() || {};

            const step1Data = {
                address: propertyAddress || current.address || '',
                showOnListing: false, // Always vacant
                unit: {
                    name: unitName,
                    beds: beds,
                    baths: baths,
                    size: size,
                    monthlyRent: monthlyRent,
                    deposit: deposit,
                    leaseLength: leaseLength,
                    amenities: current.unit?.amenities || [],
                    description: current.unit?.description || '',
                    photos: current.unit?.photos || []
                },
                building: {
                    yearBuilt: yearBuilt
                },
                media: {
                    photos: current.media?.photos || uploadedPhotos.length || 0,
                    virtualTours: current.media?.virtualTours || 0,
                    videos: current.media?.videos || 0
                }
            };

            // Merge with existing data to preserve all fields
            const updated = { ...current, ...step1Data };
            ListingStorage.saveCurrentListing(updated);
        }

        // Property Type Selection Functions
        let selectedPropertyType = 'condo'; // Default to Condo as shown in image

        function selectPropertyType(type) {
            selectedPropertyType = type;
            
            // Update button styles
            const buttons = {
                'single-family': document.getElementById('propertyTypeSingleFamily'),
                'condo': document.getElementById('propertyTypeCondo'),
                'townhome': document.getElementById('propertyTypeTownhome'),
                'apartment': document.getElementById('propertyTypeApartment')
            };
            
            // Reset all buttons
            Object.values(buttons).forEach(btn => {
                if (btn) {
                    btn.classList.remove('bg-emerald-600', 'text-white', 'hover:bg-emerald-700');
                    btn.classList.add('border', 'border-zinc-200', 'bg-white', 'text-zinc-900', 'hover:bg-zinc-50');
                }
            });
            
            // Highlight selected button
            if (buttons[type]) {
                buttons[type].classList.remove('border', 'border-zinc-200', 'bg-white', 'text-zinc-900', 'hover:bg-zinc-50');
                buttons[type].classList.add('bg-emerald-600', 'text-white', 'hover:bg-emerald-700');
            }
            
            savePropertyTypeData();
        }

        function savePropertyTypeData() {
            const address = document.getElementById('propertyAddress')?.value || '';
            const sharedLivingSpace = document.getElementById('sharedLivingSpace')?.checked || false;
            
            const current = ListingStorage.getCurrentListing() || {};
            current.propertyType = selectedPropertyType;
            current.sharedLivingSpace = sharedLivingSpace;
            if (address) {
                current.address = address;
            }
            ListingStorage.saveCurrentListing(current);
        }

        function addProperty() {
            const address = document.getElementById('propertyAddress')?.value.trim();
            
            if (!address) {
                alert('Please enter a property address.');
                return;
            }
            
            // Save property type data
            savePropertyTypeData();
            
            // The property is now added - you can add additional logic here
            // For example, navigate to next step or show success message
            console.log('Property added:', {
                type: selectedPropertyType,
                address: address,
                sharedLivingSpace: document.getElementById('sharedLivingSpace')?.checked || false
            });
        }

        // Load saved data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const saved = ListingStorage.getCurrentListing();
            
            // Load property type data
            if (saved?.propertyType) {
                selectPropertyType(saved.propertyType);
            }
            if (saved?.address) {
                const addressInput = document.getElementById('propertyAddress');
                if (addressInput) {
                    addressInput.value = saved.address;
                }
            }
            if (saved?.sharedLivingSpace) {
                const checkbox = document.getElementById('sharedLivingSpace');
                if (checkbox) {
                    checkbox.checked = saved.sharedLivingSpace;
                }
            }
            
            // Load unit data
            if (saved?.unit) {
                if (saved.unit.name) document.getElementById('unitName').value = saved.unit.name;
                if (saved.unit.beds) document.getElementById('beds').value = saved.unit.beds;
                if (saved.unit.baths) document.getElementById('baths').value = saved.unit.baths;
                if (saved.unit.size) document.getElementById('size').value = saved.unit.size;
                if (saved.unit.monthlyRent) document.getElementById('monthlyRent').value = saved.unit.monthlyRent;
                if (saved.unit.deposit) document.getElementById('deposit').value = saved.unit.deposit;
                if (saved.unit.leaseLength) document.getElementById('leaseLength').value = saved.unit.leaseLength;
                if (saved.building?.yearBuilt) document.getElementById('yearBuilt').value = saved.building.yearBuilt;
            }
            // Validate form after loading saved data
            validateForm();
            
            // Clear the creatingListing flag after page loads (it was only needed during navigation)
            setTimeout(() => {
                sessionStorage.removeItem('creatingListing');
            }, 100);
        });

        // Clear form data when navigating away (unless going to next step)
        window.addEventListener('beforeunload', function(e) {
            // Only clear if not navigating to next step in the flow
            const isCreatingListing = sessionStorage.getItem('creatingListing');
            if (!isCreatingListing) {
                // Clear form fields and localStorage
                ListingStorage.clearCurrentListing();
            }
        });

        // Save step 1 data before navigating to next step
        function saveStep1Data(event) {
            // Collect form data directly by ID
            const propertyAddress = document.getElementById('propertyAddress')?.value.trim() || '';
            const unitName = document.getElementById('unitName')?.value || '';
            const beds = document.getElementById('beds')?.value || '';
            const baths = document.getElementById('baths')?.value || '';
            const size = document.getElementById('size')?.value || '';
            const monthlyRent = document.getElementById('monthlyRent')?.value || '';
            const deposit = document.getElementById('deposit')?.value || '';
            const leaseLength = document.getElementById('leaseLength')?.value || '12';
            const yearBuilt = document.getElementById('yearBuilt')?.value || '';

            // Get existing saved data to preserve amenities, description, and photos
            const current = ListingStorage.getCurrentListing() || {};

            const step1Data = {
                address: propertyAddress || current.address || '',
                showOnListing: false, // Always vacant
                unit: {
                    name: unitName,
                    beds: beds,
                    baths: baths,
                    size: size,
                    monthlyRent: monthlyRent,
                    deposit: deposit,
                    leaseLength: leaseLength,
                    amenities: current.unit?.amenities || [],
                    description: current.unit?.description || '',
                    photos: current.unit?.photos || []
                },
                building: {
                    yearBuilt: yearBuilt
                },
                media: {
                    photos: current.media?.photos || uploadedPhotos.length || 0,
                    virtualTours: current.media?.virtualTours || 0,
                    videos: current.media?.videos || 0
                }
            };

            // Merge with existing data to preserve all fields
            const updated = { ...current, ...step1Data };
            ListingStorage.saveCurrentListing(updated);
        }
    </script>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="hidden fixed inset-0 z-50 overflow-y-auto">
        <!-- Backdrop with blur -->
        <div class="fixed inset-0 bg-black/30 backdrop-blur-sm" onclick="closeFeedbackModal()"></div>
        
        <!-- Modal Content -->
        <div class="flex min-h-full items-center justify-center p-4">
            <div class="relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Close Button -->
                <button onclick="closeFeedbackModal()" class="absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 transition-colors z-10">
                    <iconify-icon icon="lucide:x" width="24"></iconify-icon>
                </button>

                <!-- Modal Header -->
                <div class="p-6 border-b border-zinc-200">
                    <div class="flex items-center justify-center gap-2">
                        <div class="w-8 h-8 bg-emerald-600 rounded flex items-center justify-center">
                            <iconify-icon icon="lucide:building-2" width="20" class="text-white"></iconify-icon>
                        </div>
                        <span class="text-xl font-semibold text-zinc-900">Rental Manager</span>
                        <span class="text-xs text-zinc-500 mt-1">â„¢</span>
                    </div>
                </div>

                <!-- Modal Body -->
                <form onsubmit="submitFeedback(); return false;" class="p-6 space-y-6">
                    <!-- Website Experience Rating -->
                    <div>
                        <h3 class="text-sm font-medium text-zinc-900 mb-3">Please rate your website experience today:</h3>
                        <div class="flex gap-1">
                            <button type="button" onclick="setRating(1)" class="star-rating text-zinc-300 hover:text-yellow-400 transition-colors">
                                <iconify-icon icon="lucide:star" width="24" fill="currentColor"></iconify-icon>
                            </button>
                            <button type="button" onclick="setRating(2)" class="star-rating text-zinc-300 hover:text-yellow-400 transition-colors">
                                <iconify-icon icon="lucide:star" width="24" fill="currentColor"></iconify-icon>
                            </button>
                            <button type="button" onclick="setRating(3)" class="star-rating text-zinc-300 hover:text-yellow-400 transition-colors">
                                <iconify-icon icon="lucide:star" width="24" fill="currentColor"></iconify-icon>
                            </button>
                            <button type="button" onclick="setRating(4)" class="star-rating text-zinc-300 hover:text-yellow-400 transition-colors">
                                <iconify-icon icon="lucide:star" width="24" fill="currentColor"></iconify-icon>
                            </button>
                            <button type="button" onclick="setRating(5)" class="star-rating text-zinc-300 hover:text-yellow-400 transition-colors">
                                <iconify-icon icon="lucide:star" width="24" fill="currentColor"></iconify-icon>
                            </button>
                        </div>
                        <input type="hidden" id="rating" name="rating" value="0">
                    </div>

                    <!-- Open-ended Feedback -->
                    <div>
                        <h3 class="text-sm font-medium text-zinc-900 mb-2">Tell us about your experience. What did you like? What can we do better?</h3>
                        <textarea 
                            name="feedback" 
                            rows="6" 
                            class="w-full px-4 py-3 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"
                            placeholder="Share your thoughts..."
                        ></textarea>
                    </div>

                    <!-- Screenshot Upload -->
                    <div>
                        <h3 class="text-sm font-medium text-zinc-900 mb-2">Want to share any reference screenshot(s)? Upload here:</h3>
                        <p class="text-xs text-zinc-500 mb-3">
                            File number limit: 5 | Single file size limit: 100MB | Allowed file types: Word, Excel, PPT, PDF, Image, Video, Audio
                        </p>
                        <div 
                            id="fileDropZone" 
                            class="border-2 border-dashed border-zinc-300 rounded-lg p-8 text-center cursor-pointer hover:border-emerald-500 hover:bg-emerald-50/50 transition-colors"
                        >
                            <iconify-icon icon="lucide:upload" width="32" class="text-zinc-400 mx-auto mb-2"></iconify-icon>
                            <p class="text-sm text-zinc-600">Drop files or click here to upload</p>
                        </div>
                        <input type="file" id="fileInput" multiple class="hidden" accept=".doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.jpg,.jpeg,.png,.gif,.mp4,.mp3,.wav">
                        <div id="fileList" class="mt-3 space-y-2"></div>
                    </div>

                    <!-- Feedback Topic Selection -->
                    <div>
                        <h3 class="text-sm font-medium text-zinc-900 mb-3">Which topic(s) is your feedback about?</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="listing" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Listing</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="leases" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Leases</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="payments" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Payments</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="leads" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Leads</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="expenses" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Expenses</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="maintenance" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Maintenance</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="applications" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Applications</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="topics" value="other" id="topicOther" class="w-4 h-4 text-emerald-600 border-zinc-300 rounded focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Other</span>
                            </label>
                        </div>
                        <input 
                            type="text" 
                            id="topicOtherText" 
                            placeholder="Please specify" 
                            class="mt-2 w-full px-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent hidden"
                        >
                    </div>

                    <!-- User Role Description -->
                    <div>
                        <h3 class="text-sm font-medium text-zinc-900 mb-3">Which best describes you?</h3>
                        <div class="space-y-2">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="role" value="renter" class="w-4 h-4 text-emerald-600 border-zinc-300 focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Renter</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="role" value="rental-manager" class="w-4 h-4 text-emerald-600 border-zinc-300 focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Rental Manager</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="role" value="other" id="roleOther" class="w-4 h-4 text-emerald-600 border-zinc-300 focus:ring-emerald-500">
                                <span class="text-sm text-zinc-700">Other</span>
                            </label>
                        </div>
                        <input 
                            type="text" 
                            id="roleOtherText" 
                            placeholder="Please specify" 
                            class="mt-2 w-full px-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent hidden"
                        >
                    </div>

                    <!-- Contact Information -->
                    <div>
                        <h3 class="text-sm font-medium text-zinc-900 mb-3">May we contact you for more information about your experience?</h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm text-zinc-700 mb-1">Name:</label>
                                <input 
                                    type="text" 
                                    name="name" 
                                    class="w-full px-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
                                    placeholder="Optional"
                                >
                            </div>
                            <div>
                                <label class="block text-sm text-zinc-700 mb-1">Email:</label>
                                <input 
                                    type="email" 
                                    name="email" 
                                    class="w-full px-4 py-2 rounded-md border border-zinc-200 bg-white text-zinc-900 placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
                                    placeholder="Optional"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- Modal Footer -->
                    <div class="pt-6 border-t border-zinc-200 flex items-center justify-between">
                        <p class="text-xs text-zinc-500">Protected by reCAPTCHA: Privacy & Terms</p>
                        <div class="flex items-center gap-3">
                            <button 
                                type="button" 
                                onclick="closeFeedbackModal()" 
                                class="px-4 py-2 rounded-md border border-zinc-200 text-zinc-700 hover:bg-zinc-50 transition-colors text-sm font-medium"
                            >
                                Cancel
                            </button>
                            <button 
                                type="submit" 
                                class="px-6 py-2 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition-colors text-sm font-medium flex items-center gap-2"
                            >
                                Submit
                                <iconify-icon icon="lucide:arrow-right" width="16"></iconify-icon>
                            </button>
                        </div>
                        <p class="text-xs text-zinc-500">Powered by Qualtrics</p>
                    </div>
                </form>
            </div>
        </div>
    </div>


</body>
</html>
